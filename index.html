<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Drive Upload</title>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <h2>Upload Files to Google Drive</h2>
    <button id="upload-button" onclick="onApiLoad()">Upload Files</button>

    <script>
        function onApiLoad() {
            gapi.load('auth', {'callback': onAuthApiLoad});
            gapi.load('picker');
        }

        function onAuthApiLoad() {
            window.gapi.auth.authorize(
                {
                    'client_id': 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com',
                    'scope': ['https://www.googleapis.com/auth/drive.file'],
                    'immediate': false
                },
                handleAuthResult);
        }

        function handleAuthResult(authResult) {
            if (authResult && !authResult.error) {
                createPicker();
            } else {
                console.log('Auth failed:', authResult);
            }
        }

        function createPicker() {
            var picker = new google.picker.PickerBuilder()
                .addView(google.picker.ViewId.DOCS)
                .setOAuthToken(gapi.auth.getToken().access_token)
                .setDeveloperKey('YOUR_DEVELOPER_KEY')
                .setCallback(pickerCallback)
                .build();
            picker.setVisible(true);
        }

        function pickerCallback(data) {
            if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
                var doc = data[google.picker.Response.DOCUMENTS][0];
                alert('You picked: ' + doc[google.picker.Document.NAME]);
            }
        }
    </script>
</body>
</html>
